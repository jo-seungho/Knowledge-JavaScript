> ### **Session 기반 인증**

세션 기반인증을 위해 Session과 Cookie가 사용된다.

- 유저가 로그인을 하고 세션이 서버 메모리 상에 저장된다. 이 때 `세션을 식별하기 위한 Session id를 기준으로 정보를 저장`한다.

- `브라우저에 쿠키로 Session id가 저장`된다.

- 쿠키에 정보가 담겨있기 때문에 브라우저는 `해당 사이트에 대한 모든 Request에 Session id를 쿠키에 담아 전송`한다.

- 서버는 `클라이언트가 보낸 Session id`와 `서버 메모리로 관리하고 있는 Session id를 비교`하여 Verification을 수행한다.

### **Session 기반 인증의 장 단점**

<span style="color: green">

- 세션 기반 인증 방식은 구현이 상당히 명확하고 실제 서버에서 로그인 상태 확인이 굉장히 유용하다.

- 상대적으로 안전하다. 서버측에서 관리하기 때문에 클라이언트 변조에 영향받거나 데이터의 Stale(손상)우려가 없다.

</span>

<span style="color: red">

- 유저들의 세션에 대한 정보를 서버 메모리에 들고 있게 된다는 부담이 있다.

- 서버 메모리에 세션 정보가 저장되기 때문에 Scale out/ Scale In이 부담될 수 있으며, 결국에는 유저 상태에 무관하게 동작할 수 있도록 Data-Driven 아키텍쳐가 요구된다.

- 멀티 디바이스 환경에서 로그인 시 신경써줘야할 부분들이 생긴다.

</span>

> ### **Token 기반 인증**

Token 기반 인증의 방법으로 많은 웹 서버들은 JWT(JSON Web Token)을 사용한다.
Token 기반 인증 방식과 Session 기반 인증 방식의 가장 큰 `차이점은 유저의 정보가 서버에 저장되지 않는다는 점`이다.

- 유저가 로그인을 하고 서버에 `세션을 이용해서 정보를 기록하는 대신, Token을 발급`한다.

- `클라이언트는 발급된 Token을 저장`한다.(일반적으로 local storage에 저장한다.)

- 클라이언트는 요청 시 `저장된 Token을 Header에 포함시켜 보낸다`.

- 서버는 매 요청시 클라이언트로부터 전달받은 Header의 Token정보를 Verification 한 뒤, `해당 유저에 권한을 인가한다`.

### **Token 기반 인증의 장 단점**

<span style="color: green">

- 클라이언트에 저장되기 때문에 서버의 메모리에 부담이 되지 않으며 Scale에 있어 대비책을 고려할 필요가 없다.

- 멀티 디바이스 환경에 대한 부담이 없다.

</span>

<span style="color: red">

- 상대적으로 Stale(손상)의 위험이 크다.

- 결국 구현을 하다보면 서버측에 token blacklist를 관리하게 될 가능성이 있고 그렇게 되면 서버측 메모리의 소모가 발생하게 된다.

- Token은 일반적으로 Session id 보다 길다.

- XSS 공격에 취약할 수 있어 가능한 민감한 정보를 포함시키지 않을 필요가 있다.

</span>
